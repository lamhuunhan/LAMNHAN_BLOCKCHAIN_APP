Êşº¾   7M  LamNhan_Chain  java/lang/Object 
blockchain Ljava/util/ArrayList; 	Signature Ljava/util/ArrayList<LBlock;>; UTXOs Ljava/util/HashMap; :Ljava/util/HashMap<Ljava/lang/String;LTransactionOutput;>; 
difficulty I minimumTransaction F walletA 
LTCWallet; walletB genesisTransaction LTransaction; <clinit> ()V Code  java/util/ArrayList
     <init>	       java/util/HashMap
  	  # 	 
	  %  =ÌÌÍ	  (   LineNumberTable LocalVariableTable
   this LLamNhan_Chain; main ([Ljava/lang/String;)V 1 2org/bouncycastle/jce/provider/BouncyCastleProvider
 0 
 4 6 5 java/security/Security 7 8 addProvider (Ljava/security/Provider;)I : TCWallet
 9 	  =  	  ?   A Transaction	 9 C D E 	publicKey Ljava/security/PublicKey;BÈ  
 @ H  I K(Ljava/security/PublicKey;Ljava/security/PublicKey;FLjava/util/ArrayList;)V	  K  	 9 M N O 
privateKey Ljava/security/PrivateKey;
 @ Q R S generateSignature (Ljava/security/PrivateKey;)V U 0	 @ W X Y transactionId Ljava/lang/String;	 @ [ \  outputs ^ TransactionOutput	 @ ` a E 
reciepient	 @ c d  value
 ] f  g /(Ljava/security/PublicKey;FLjava/lang/String;)V
  i j k add (Ljava/lang/Object;)Z
  m n o get (I)Ljava/lang/Object;	 ] q r Y id
  t u v put 8(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;	 x z y java/lang/System { | out Ljava/io/PrintStream; ~ (Äang táº¡o vÃ  Ä‘Ã o khá»‘i gá»‘c .... 
 € ‚  java/io/PrintStream ƒ „ println (Ljava/lang/String;)V † Block
 … ˆ  „
 … Š ‹ Œ addTransaction (LTransaction;)Z
     addBlock 
(LBlock;)V	 … ’ “ Y hash • java/lang/StringBuilder — 
Sá»‘ dÆ° cá»§a vÃ­ A lÃ  : 
 ” ˆ
 9 š › œ 
getBalance ()F
 ”  Ÿ   append (F)Ljava/lang/StringBuilder;
 ” ¢ £ ¤ toString ()Ljava/lang/String; ¦ C
Giao dá»‹ch chuyá»ƒn sá»‘ tiá»n lÃ  40 tá»« vÃ­ A Ä‘áº¿n vÃ­ B...B   
 9 © ª « 	sendFunds )(Ljava/security/PublicKey;F)LTransaction; ­ "
Sá»‘ dÆ° má»›i cá»§a vÃ­ A lÃ  :  ¯ Sá»‘ dÆ° cá»§a vÃ­ B lÃ  :  ± H
VÃ­ A gá»­i má»™t sá»‘ tiá»n nhiá»u hÆ¡n sá»‘ tiá»n cÃ³ trong vÃ­...Dz   ´  Sá»‘ dÆ° má»›i cá»§a vÃ­ B lÃ    ¶ C
Giao dá»‹ch chuyá»ƒn sá»‘ tiá»n lÃ  20 tá»« vÃ­ B Ä‘áº¿n vÃ­ A...A   
  ¹ º » isChainValid ()Ljava/lang/Boolean; args [Ljava/lang/String; coinbase genesis LBlock; block1 block2 block3 Å java/lang/String
 Ä Ç  È ([C)V
 Ä Ê Ë Ì replace (CC)Ljava/lang/String;
 … Î Ï ¤ calculateHash
 Ä Ñ Ò k equals Ô +#MÃ£ bÄƒm khá»‘i hiá»‡n táº¡i khÃ´ng khá»›p
 Ö Ø × java/lang/Boolean Ù Ú valueOf (Z)Ljava/lang/Boolean;	 … Ü İ Y previousHash ß '#MÃ£ bÄƒm khá»‘i trÆ°á»›c khÃ´ng khá»›p
 Ä á â ã 	substring (II)Ljava/lang/String; å ,#Khá»‘i nÃ y khÃ´ng Ä‘Ã o Ä‘Æ°á»£c do lá»—i!	 … ç è  transactions
 @ ê ë ì verifySignature ()Z î ##Chá»¯ kÃ½ sá»‘ cá»§a giao dá»‹ch (
 ” ğ Ÿ ñ (I)Ljava/lang/StringBuilder; ó ) khÃ´ng há»£p lá»‡
 ” õ Ÿ ö -(Ljava/lang/String;)Ljava/lang/StringBuilder;
 @ ø ù œ getInputsValue
 @ û ü œ getOutputsValue ş C#CÃ¡c Ä‘áº§u vÃ o khÃ´ng khá»›p vá»›i Ä‘áº§u ra trong giao dá»‹ch (  )	 @  inputs
  iterator ()Ljava/util/Iterator;	
 java/util/Iterator next ()Ljava/lang/Object; TransactionInput	 Y transactionOutputId
  n &(Ljava/lang/Object;)Ljava/lang/Object; 2#CÃ¡c Ä‘áº§u vÃ o tham chiáº¿u trong giao dá»‹ch ( ) bá»‹ thiáº¿u!	 UTXO LTransactionOutput;	 ] c  ") cÃ³ giÃ¡ trá»‹ khÃ´ng há»£p lá»‡
 "# remove	%& ì hasNext	 ] `) #Giao dá»‹ch(+ $) cÃ³ ngÆ°á»i nháº­n khÃ´ng Ä‘Ãºng!	 @-. E sender0 #Äáº§u ra cá»§a giao (2 %) khÃ´ng Ä‘Ãºng vá»›i ngÆ°á»i gá»­i.
 456 size ()I8 Chuá»—i khá»‘i há»£p lá»‡! currentBlock previousBlock 
hashTarget 	tempUTXOs i 
tempOutput t currentTransaction input LTransactionInput; output LocalVariableTypeTable StackMapTable
 …GHI 	mineBlock (I)V newBlock 
SourceFile LamNhan_Chain.java !      	         	 	 
       	     	     	     	     	             N      » Y· ³ » Y· !³ "³ $&³ '±    )       
 
        *             /     *· +±    )        *        , -   	 . /    Ö    ú» 0Y· 2¸ 3W» 9Y· ;³ <» 9Y· ;³ >» 9Y· ;L» @Y+´ B² <´ BF· G³ J² J+´ L¶ P² JTµ V² J´ Z» ]Y² J´ _² J´ b² J´ V· e¶ hW² "² J´ Z¶ lÀ ]´ p² J´ Z¶ lÀ ]¶ sW² w}¶ » …YT· ‡M,² J¶ ‰W,¸ » …Y,´ ‘· ‡N² w» ”Y–· ˜² <¶ ™¶ ¶ ¡¶ ² w¥¶ -² <² >´ B§¶ ¨¶ ‰W-¸ ² w» ”Y¬· ˜² <¶ ™¶ ¶ ¡¶ ² w» ”Y®· ˜² >¶ ™¶ ¶ ¡¶ » …Y-´ ‘· ‡:² w°¶ ² <² >´ B²¶ ¨¶ ‰W¸ ² w» ”Y¬· ˜² <¶ ™¶ ¶ ¡¶ ² w» ”Y³· ˜² >¶ ™¶ ¶ ¡¶ » …Y´ ‘· ‡:² wµ¶ ² >² <´ B·¶ ¨¶ ‰W² w» ”Y¬· ˜² <¶ ™¶ ¶ ¡¶ ² w» ”Y³· ˜² >¶ ™¶ ¶ ¡¶ ¸ ¸W±    )   † !          '  >   H ! P " s # — % Ÿ & © ' ± ( µ + Á , Ü - ä . ÷ / û 0 11 3> 4F 5Z 6_ 7z 8• :£ ;« <¿ =Ú >õ @ù B *   >   ú ¼ ½   'Ó ¾   ©Q ¿ À  Á9 Á À > ¼ Â À £ W Ã À  	 º »    £  
  ƒ» ÄY² $¼· Æ0¶ ÉM» Y· !N-² J´ Z¶ lÀ ]´ p² J´ Z¶ lÀ ]¶ sW6§*² ¶ lÀ …K² d¶ lÀ …L*´ ‘*¶ Í¶ Ğš ² wÓ¶ ¸ Õ°+´ ‘*´ Û¶ Ğš ² wŞ¶ ¸ Õ°*´ ‘² $¶ à,¶ Ğš ² wä¶ ¸ Õ°6§¦*´ æ¶ lÀ @:¶ éš $² w» ”Yí· ˜¶ ïò¶ ô¶ ¡¶ ¸ Õ°¶ ÷¶ ú•™ $² w» ”Yı· ˜¶ ïÿ¶ ô¶ ¡¶ ¸ Õ°´¶:	§ ƒ	¹ À:-´¶À ]:Ç &² w» ”Y· ˜¶ ï¶ ô¶ ¡¶ ¸ Õ°´´´•™ &² w» ”Y· ˜¶ ï¶ ô¶ ¡¶ ¸ Õ°-´¶!W	¹$ šÿy´ Z¶:	§ 	¹ À ]:-´ p¶ sW	¹$ šÿá´ Z¶ lÀ ]´'´ _¥ &² w» ”Y(· ˜¶ ï*¶ ô¶ ¡¶ ¸ Õ°´ Z¶ lÀ ]´'´,¥ &² w» ”Y/· ˜¶ ï1¶ ô¶ ¡¶ ¸ Õ°„*´ æ¶3¡şT„² ¶3¡ıÑ² w7¶ ¸ Õ°    )   º .   G  H  I = L C N O O ] Q k R s S x V † W  X “ [ ¥ \ ­ ] ² b ¸ c Æ e Î f ê g ï i ı j k n7 oE qJ rh sm v~ wœ x¡ {« nµ ~Î Ú ~ä ‚û ƒ „ †5 ‡S ˆX bg Lu ~  *   f 
 O9 À   ]: À  p; Y  h< 
  @5=  E f>  µ²?   Æ’@  7 tAB Î C D     h<  E   Ğ ÿ C    Ä   ÿ 4  … … Ä   ÿ   … … Ä    ü 6 @.ÿ  
 … … Ä   @ 	  ÿ A 
 … … Ä  ] @	  3ÿ 	 
 … … Ä   @ 	  ÿ C  … … Ä   @  ú 9ÿ     Ä    	       B     *² $¶F² *¶ hW±    )       “  ”  • *       J À   K   L